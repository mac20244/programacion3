'use strict';performance.mark('swn-loader-start'),function loader(aweLoader){window.aweLoader=aweLoader;const HOST=new URL(document.currentScript.src).origin,CONF_HOST='https://wtb-api-hub.swaven.com/cache/wtb/v2/api/conf/',WIDGET_ENGINE_VERSION='1',BUILD_NUMBER='121ea2c',ADDRESS_STORAGE_KEY='swn.plainAddress',DEFAULT_BTN_SELECTOR='.swn-awe-open',EAN_MIN_LENGTH=7,EAN_MAX_LENGTH=14,EAN_PAD_LENGTH=13,OPENDELAY_REAL_TIMER_RELEASE='2020-11-13T00:00:00.000Z',OOS_INIT_LVL=2;let instances=[],_isReady=!1,_logHost,_trkHost,availCheckResults,availCheckCallbacks,ifrOrigin,dnt=!1,_dntQueue;const withSafeFrame=!!window.$sf,debug=location.search.indexOf('debug')>-1;let clicktag,pageId,ctnrObserver,contextCheckItv,useTranspiled=function(){try{eval('const foo = {}; foo?.bar')}catch{return!0}return!1}();function receiveMessage(e){if(!e.origin.includes('.swaven.com')&&!e.origin.includes('.mikmak.ai'))return;if(!e||!e.data||!e.data.action)return;const t=1===instances.length?instances[0]:findInstance(e.data._iid);switch(e.data.action){case'awe:resize':t&&(t.ifr.style.height='number'==typeof e.data.height?e.data.height+'px':e.data.height);break;case'awe:getLocation':getLocation(e.data._iid,e.data.auto,e.data._mid);break;case'awe:saveLocation':sessionStorage.setItem(ADDRESS_STORAGE_KEY,JSON.stringify(e.data.loc));break;case'awe:close':t&&closeWidget(t);break;case'awe:addScript':try{e.data.script&&addScript(e.data.script)}catch(e){console.error(e)}break;case'awe:trackingCallback':t&&(t.trackingCallback?t.trackingCallback(e.data.trkData):'function'==typeof window.aweCallback&&window.aweCallback(e.data.trkData));break;case'awe:host-style':injectHostStyle(e.data.style,e.data._iid);break;case'awe:getSize':let n={};if(t){n=(e.data.useContainer?t.ifr.parentElement:t.ifr).getBoundingClientRect()}sendMessage(t,{action:'awe:getSize',_mid:e.data._mid,height:Math.round(n.height),width:Math.round(n.width)});break;case'awe:toggleFullScreen':t&&toggleFullScreen(t,e);break;case'awe:toggleCloak':t&&toggleCloak(t,e);break;case'awe:clicktag':t?dropClicktag(t.params.wtbid,t.wtbConf.module,t.id,e.data.trigger):dropClicktag(null,null,null,e.data.trigger);break;case'awe:updateLocale':t&&updateLocale(e.data.add,e.data.remove,t);break;case'awe:updateTitle':t&&t.ifr.setAttribute('title',e.data.newTitle);break;case'awe:hideScroll':t&&document.documentElement.classList.add(`swn-noscroll-${t.id}`);break;case'awe:dropPixel':dropPixel(e.data.url);break;case'awe:setRtl':if(t&&t.params.embeddedBtn){const e=document.querySelector(`.swn-awe-btn.swn-${t.id}`);e&&e.classList.add('rtl')}break;case'awe:sfDetect':sendMessage(t,{action:'awe:sfDetect',_mid:e.data._mid});break;case'awe:templateBuild':aweLoader.version[e.data.name]=e.data.build;break;case'awe:ping':ifrOrigin=e.origin,processMessageQueue(t);break;case'awe:glassbox':getGlassboxInfo().then((n=>{sendMessage(t,{action:'awe:glassbox',_mid:e.data._mid,...n})}))}}function uuid(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,uuid)}function getConf(e){const t=new XMLHttpRequest,n=[];e.params.remoteClientConfId&&n.push('remoteClientConfigId='+e.params.remoteClientConfId),e.params.draft&&n.push('draft=1');const a=CONF_HOST+e.params.wtbid+(n.length?'?'+n.join('&'):'');t.onload=function(n){e.params.perf=e.params.perf||{};const o=performance.getEntriesByName(a)[0];if(o&&(e.params.perf.conf=Math.round(o.duration)),200===t.status)try{e.wtbConf=JSON.parse(t.response),setTrackingHosts(e.wtbConf),sanitizeParams(e),e.paramsSet=!0,loadGTM(e.params.gtmId||e.wtbConf.gtmId),injectInstanceStyle(e),processButtons(e),e.params.availPrdOnly&&!e.params.embeddedBtn&&'LP'!==e.wtbConf.touchPoint&&checkGlobalEansAvailability(e),initWidget(e)}catch(t){'NO_ENABLED_COUNTRIES'===t.message?console.warn('No match between context and config countries, abort'):console.error(t),track('error',{msg:t.message},!0),disableButtons(document.querySelectorAll(e.params.btnSelector),e,'init_error'),e.params.ajaxButton&&setInterval((function(){disableButtons(document.querySelectorAll(e.params.btnSelector+':not(.swn-bound)'),e,'init_error')}),1e3)}else console.error('Cannot retrieve wtbConf %s: error %s',e.params.wtbid,t.status)},t.open('GET',a,!0),t.withCredentials=!0,t.send(null)}function sanitizeParams(e){const t=e.params;t.remoteConf&&Object.keys(t.remoteConf).length&&(e.wtbConf.widgetclientparams=e.wtbConf.widgetclientparams||{},e.wtbConf.widgetclientparams.params=t.remoteConf);const n=!(!e.wtbConf.enableremoteconf||!e.wtbConf.widgetclientparams);if('string'==typeof t.locales&&(t.locales=t.locales.split(',').map((function(e){return e.trim()})).filter((function(e){return!!e}))),t.locales=(t.locales||[]).map((function(e){return e.toLowerCase()})),t.locale&&(t.locales.push(t.locale.toLowerCase()),delete t.locale),n&&(e.wtbConf.widgetclientparams.params.locale||e.wtbConf.widgetclientparams.params.lang)){const n=(e.wtbConf.widgetclientparams.params.locale||e.wtbConf.widgetclientparams.params.lang).toLowerCase();-1===t.locales.indexOf(n)&&t.locales.push(n)}if(t.title=t.title||n&&e.wtbConf.widgetclientparams.params['iframe-title']||'Where to find the product widget',t.build=BUILD_NUMBER,t.btnSelector=t.btnSelector||DEFAULT_BTN_SELECTOR,null==t.embeddedBtn){let a=getOptionValue(n,e.wtbConf.widgetclientparams,'embedded-btn',null);null==a&&(a=getOptionValue(n,e.wtbConf.widgetclientparams,'button-mode',null),a=null!=a?'embedded'===a:null),t.embeddedBtn=a}if(t.pageId=pageId,t.template=t.template||n&&e.wtbConf.widgetclientparams.params.template||'swnDefault',t.freeSize=!1,t.hideHostScroll=!1,t.idType||(t.idType='gtin'),null==t.masterProductMode&&(t.masterProductMode=getOptionValue(n,e.wtbConf.widgetclientparams,'master-product-mode',!1)),null==t.multiOffer&&(t.multiOffer=getOptionValue(n,e.wtbConf.widgetclientparams,'multi-offer',!1)),t.masterProductMode&&(t.multiOffer=!0),null==t.productSearchEnabled&&(t.productSearchEnabled=getOptionValue(n,e.wtbConf.widgetclientparams,'product-search-enabled',!1)),null==t.catalogSelector&&(t.catalogSelector=getOptionValue(n,e.wtbConf.widgetclientparams,'catalog-selector',!1)),null==t.showProductFilters&&(t.showProductFilters=getOptionValue(n,e.wtbConf.widgetclientparams,'show-filters',!1)),null==t.headerLogo&&(t.headerLogo=getOptionValue(n,e.wtbConf.widgetclientparams,'header-logo',null)),null==t.headerLabel&&(t.headerLabel=getOptionValue(n,e.wtbConf.widgetclientparams,'header-label',null)),null==t.productLabelPattern&&(t.productLabelPattern=getOptionValue(n,e.wtbConf.widgetclientparams,'product-label-pattern',null)),null==t.prdListItemLabelPattern&&(t.prdListItemLabelPattern=getOptionValue(n,e.wtbConf.widgetclientparams,'prd-list-item-label-pattern',null)),null==t.hidePrdImgOnMobile&&(t.hidePrdImgOnMobile=getOptionValue(n,e.wtbConf.widgetclientparams,'hide-prd-img-on-mobile',!0)),null==t.hidePrdOnMobile&&(t.hidePrdOnMobile=getOptionValue(n,e.wtbConf.widgetclientparams,'hide-prd-on-mobile',!1)),null==t.mobileFullscreen&&(t.mobileFullscreen=getOptionValue(n,e.wtbConf.widgetclientparams,'mobile-fullscreen',!0)),null==t.closeBtn&&(t.closeBtn=getOptionValue(n,e.wtbConf.widgetclientparams,'close-btn',!1)),null==t.displayProductPanel&&(t.displayProductPanel=getOptionValue(n,e.wtbConf.widgetclientparams,'display-product-panel',!0)),null==t.noOffline&&(t.noOffline=getOptionValue(n,e.wtbConf.widgetclientparams,'no-offline',!1)),null==t.onlineOnly&&(t.onlineOnly=getOptionValue(n,e.wtbConf.widgetclientparams,'online-only',!1)),t.onlineOnly=t.onlineOnly||t.noOffline,null==t.offlineOnly&&(t.offlineOnly=getOptionValue(n,e.wtbConf.widgetclientparams,'offline-only',!1)),null==t.customLink&&(t.customLink=getOptionValue(n,e.wtbConf.widgetclientparams,'custom-link',null)),null==t.customLinkUrl&&(t.customLinkUrl=getOptionValue(n,e.wtbConf.widgetclientparams,'custom-link-url',null)),null==t.showTermsOfUse&&(t.showTermsOfUse=getOptionValue(n,e.wtbConf.widgetclientparams,'show-terms-of-use',!0)),null==t.modeStoreLocator&&(t.modeStoreLocator=getOptionValue(n,e.wtbConf.widgetclientparams,'mode-store-locator',!1)),null==t.popin&&(t.popin=getOptionValue(n,e.wtbConf.widgetclientparams,'popin',null)),null==t.buyBtnTxt&&(t.buyBtnTxt=getOptionValue(n,e.wtbConf.widgetclientparams,'buy-btn-txt',null)),null==t.locBtnTxt&&(t.locBtnTxt=getOptionValue(n,e.wtbConf.widgetclientparams,'loc-btn-txt',null)),null==t.routeBtnTxt&&(t.routeBtnTxt=getOptionValue(n,e.wtbConf.widgetclientparams,'route-btn-txt',null)),null==t.fillStores&&(t.fillStores=getOptionValue(n,e.wtbConf.widgetclientparams,'fill-stores',!0)),null==t.noStoreInfo&&(t.noStoreInfo=getOptionValue(n,e.wtbConf.widgetclientparams,'no-store-info',!1)),null==t.noStoreMsg&&(t.noStoreMsg=getOptionValue(n,e.wtbConf.widgetclientparams,'no-store-msg',null)),null==t.open&&(t.open=getOptionValue(n,e.wtbConf.widgetclientparams,'auto-open',!1)),location.search.indexOf('wtbopen')>-1&&(t.open=!0),null==t.prdListShadowed&&(t.prdListShadowed=getOptionValue(n,e.wtbConf.widgetclientparams,'productlist-item-display-shadow',!0)),null==t.openDelay&&(t.openDelay=getOptionValue(n,e.wtbConf.widgetclientparams,'open-delay',-1)),'string'==typeof t.openDelay&&(t.openDelay=parseInt(t.openDelay,10)),'number'==typeof t.openDelay&&!isNaN(t.openDelay)&&t.openDelay>0?t.open=!0:t.openDelay=-1,null==t.ajaxButton&&(t.ajaxButton=getOptionValue(n,e.wtbConf.widgetclientparams,'ajax',!1)),null==t.disableAutoBrowserGeoloc&&(t.disableAutoBrowserGeoloc=getOptionValue(n,e.wtbConf.widgetclientparams,'disable-browser-auto-geolocation',!1)),null==t.customTrackingOldNaming&&(t.customTrackingOldNaming=getOptionValue(n,e.wtbConf.widgetclientparams,'use-old-naming-for-custom-tracking',!1)),null==t.availPrdOnly&&(t.availPrdOnly=null!=e.wtbConf.avprdonly&&e.wtbConf.avprdonly),null==t.availCheckDefaultPrdOnly&&(t.availCheckDefaultPrdOnly=getOptionValue(n,e.wtbConf.widgetclientparams,'check-availability-on-default-prd',!1)),t.availCheckDefaultPrdOnly&&(t.availPrdOnly=!0),null==t.openFacets&&(t.openFacets=getOptionValue(n,e.wtbConf.widgetclientparams,'open-facets',null)),t.useHDLogos=getOptionValue(n,e.wtbConf.widgetclientparams,'use-hd-logos',!1),null==t.templateLayout&&(t.templateLayout=getOptionValue(n,e.wtbConf.widgetclientparams,'layout','')),'popin'!==t.templateLayout&&'drawer'!==t.templateLayout||(t.popin=!0),t.availPrdOnly&&(e.availChecks.runningReqs=new Set,availCheckResults=availCheckResults||new Map,availCheckCallbacks=availCheckCallbacks||new Map,'function'==typeof Promise&&(e.availChecks.promises=[])),null==t.addNearestOnDelivery&&(t.addNearestOnDelivery=null==e.wtbConf.addnearondlv||e.wtbConf.addnearondlv),t.theme=t.theme||n&&e.wtbConf.widgetclientparams.params.theme,'string'==typeof t.theme&&(t.theme=t.theme.split(',').map((e=>e.trim())).filter((e=>!!e))),!t.geoloc||t.geoloc.latitude&&t.geoloc.longitude||(t.geoloc=null,console.debug('Invalid geoloc parameter has been ignored')),t.location=getPersistedLocation(),t.referrer=document.referrer.substring(0,512),t.referrer2=document.location.href,null==t.alterUrlEnabled&&(t.alterUrlEnabled=getOptionValue(n,e.wtbConf.widgetclientparams,'alter-url-enabled',!1)),t.noCookie=!!t.noCookie,t.noCookie?delete t.session:t.session&&(t.session.url&&(t.session.url=t.session.url.substring(0,2048)),t.session.referrer&&(t.session.referrer=t.session.referrer.substring(0,512))),null==t.disableBackgroundClick&&(t.disableBackgroundClick=!1),'function'==typeof t.trackingCallback&&(e.trackingCallback=t.trackingCallback),delete t.trackingCallback,t.presetPdtFilters=getQuerystringParam('wtbfilters')||t.presetPdtFilters,null==t.allowOos&&(t.allowOos=+getOptionValue(n,e.wtbConf.widgetclientparams,'allow-oos',0)),selectCountry(e),t.eans||(t.eans=getQuerystringParam('wtbeans')),t.eans&&setEans(t),t.defaultEan=getQuerystringParam('wtbean')||t.defaultEan||n&&e.wtbConf.widgetclientparams.params['default-prd']||null,setDefaultEan(t),t.containerId){const n=document.getElementById(t.containerId);if(n){const a=getDataAttributes(n,t.enabledCountries,t);a.eans&&(t.eans=a.eans),a.defaultEan&&(t.defaultEan=a.defaultEan),window.MutationObserver&&setContainerObserver(n,e)}}'file:'===document.location.protocol&&(t.fileProtocol=!0),t.localesConf=n&&getLocaleOptions(e.wtbConf.widgetclientparams.params)||{},t.customTrkVars&&'object'!=typeof t.customTrkVars&&(t.customTrkVars=null),e.wtbConf.glassbox&&window._detector&&window._detector.sessionId&&window._detector.isRecording()&&(t.glassbox=_buildGlassboxPayload()),t.test=!!t.test,t.debug=debug}function lowercaseFirstLetter(e){return e.charAt(0).toLowerCase()+e.slice(1)}function getLocaleOptions(e){const t=/^locale-([a-z]{2,8}(_[a-z0-9]{2,})?)(.*)/,n={};return Object.keys(e).forEach((function(a){const o=t.exec(a);if(o&&o[1]&&o[3]){const t=o[1].toLowerCase().replace('_','-'),s=lowercaseFirstLetter(toCamelCase(o[3]));n[t]=n[t]||{},n[t][s]=e[a]}})),n}function setContainerObserver(e,t){ctnrObserver||(ctnrObserver=new MutationObserver((function(e,t){for(let t=0;t<e.length;t++){const n=e[t],a=n.target,o=a.id&&instances.find((e=>e.params.containerId===a.id));if(!o)continue;const s=/^data-(mm-ids|eans)(-\w+)?/,i=/^data-(mm-default-id|default-ean)(-\w+)?/,r=a.getAttribute(n.attributeName),l=i.test(n.attributeName),c=s.test(n.attributeName),d=l?'default':c?'eans':null;r&&o.params.availPrdOnly&&(c&&!o.params.availCheckDefaultPrdOnly||l&&o.params.availCheckDefaultPrdOnly)?_checkAvailability(r,o.params.wtbid,o.params.defaultCountry,getPersistedLocation(),o.availChecks,_getCtnrAvailCheckCallback(a,o,d)):_processCtnrEans(a,o,d)}})));const n={attributes:!0,attributeFilter:['data-mm-ids','data-mm-default-id','data-mm-ids-'+t.params.defaultCountry.toLowerCase(),'data-mm-default-id-'+t.params.defaultCountry.toLowerCase(),'data-eans','data-default-ean','data-eans-'+t.params.defaultCountry.toLowerCase(),'data-default-ean-'+t.params.defaultCountry.toLowerCase()],characterData:!1,childList:!1,subtree:!1};ctnrObserver.observe(e,n)}function _getCtnrAvailCheckCallback(e,t,n){return function(a,o){!a&&o?e&&(o.available?(e.classList.remove('swn-unavailable'),_processCtnrEans(e,t,n)):e.classList.add('swn-unavailable')):a&&console.error(a)}}function _processCtnrEans(e,t,n){if(t.isOpen){showWidget(t,!1,null,getDataAttributes(e,t.params.enabledCountries,t.params,n))}else'string'!=typeof n||t.hasCtnrUpdates&&t.hasCtnrUpdates!==n?t.hasCtnrUpdates=!0:t.hasCtnrUpdates=n}function createIframe(e){const t=document.createElement('iframe');return t.setAttribute('name',e.id),t.setAttribute('width',e.params.width||'100%'),debug&&t.setAttribute('allow','clipboard-write'),e.params.height&&t.setAttribute('height',e.params.height),t.setAttribute('allowtransparency','true'),t.setAttribute('role','document'),t.classList.add('swn-awe-ifr'),t.classList.add(e.params.media?'swn-media':'swn-hidden'),t.classList.add('swn-'+e.id),t.setAttribute('scrolling',e.params.containerId?'no':'auto'),performance.mark('swn-iframe-start'),t.src=getIframeUrl(e),t.onload=function(t){performance.measure('swn-iframe-time','swn-iframe-start'),e.params.perf=e.params.perf||{},e.params.perf.ifr=performance.getEntriesByName('swn-iframe-time','measure')[0].duration,e.ifrLoaded=!0,processMessageQueue(e),initWidget(e)},t}function createContainer(e){if(e.params.containerId){const t=document.getElementById(e.params.containerId);t?(e.ifr.classList.add('swn-awe-ifr-closed'),t.appendChild(e.ifr)):_waitForContainer(e)}else{const t=document.createElement('div');t.id='swn-awe-popin-ctnr',t.classList.add('swn-awe-popin-ctnr','swn-awe-popin-ctnr-closed','swn-awe-popin-ctnr-closed-done'),document.body.appendChild(t),t.addEventListener('click',onOverlayClick),t.appendChild(e.ifr)}}function onOverlayClick(e){e.stopPropagation();const t=e.currentTarget.firstElementChild;if(!t)return;const n=instances.find((e=>e.ifr===t));n&&(closeWidget(n),sendMessage(n,{action:'awe:tracking',params:{event:'close'}}))}function _waitForContainer(e){let t=0;const n=setInterval((function(){const a=document.getElementById(e.params.containerId);a&&(e.ifr.classList.add('swn-awe-ifr-closed'),a.appendChild(e.ifr)),(++t>=10||a)&&(clearInterval(n),a||console.error(`Container ${e.params.containerId} not found in document.`))}),150)}function initWidget(e){if(!e.ifrLoaded||!e.paramsSet)return;const t=e.params;if(null!=t.popin){if(t.containerId&&t.popin)return delete t.containerId,e.ifr.classList.remove('swn-awe-ifr-closed'),void createContainer(e);if(!t.containerId&&!t.popin){const n=document.getElementById('swn-awe-popin-ctnr'),a=document.createElement('div');return t.containerId=uuid(),a.setAttribute('id',t.containerId),document.body.appendChild(a),n.parentNode.removeChild(n),void createContainer(e)}}t.templateLayout&&e.ifr.classList.add('swn-'+t.templateLayout);try{const n=performance.getEntriesByName('swn-loader-init-start').length>1?'swn-loader-init-start':e.params.media?'swn-mediatag-start':'swn-loader-start';performance.measure('swn-loader-duration-'+e.id,n),t.perf.loader=performance.getEntriesByName('swn-loader-duration-'+e.id)[0].duration}catch(e){console.error('This widget is marked as media but banner/video tag was not run.')}if(sendMessage(e,{action:'awe:initWidget',params:t,wtbConf:e.wtbConf,switchStart:Date.now()}),e.params.open)if(-1===e.params.openDelay)e.availChecks.promises?anyPromise(e.availChecks.promises).then((function(){showWidget(e,!0)})).catch((function(){console.warn('No available product, cancel auto-open')})):showWidget(e,!0);else{let t=e.params.openDelay;e.wtbConf.createDate>=OPENDELAY_REAL_TIMER_RELEASE&&(performance.measure('swn-before-openDelay',e.params.media?'swn-mediatag-start':'swn-loader-start'),t=Math.max(0,e.params.openDelay-Math.floor(performance.getEntriesByName('swn-before-openDelay')[0].duration))),e.openDelayTimeout=setTimeout((function(){e.openDelayTimeout=null,e.availChecks.promises?anyPromise(e.availChecks.promises).then((function(){showWidget(e,!0)})).catch((function(){console.warn('No available product, cancel auto-open')})):showWidget(e,!0)}),t)}const n=e.params.localesConf;let a=e.params.locales[0];n[a]&&n[a].iframeTitle?e.ifr.setAttribute('title',n[a].iframeTitle):e.ifr.setAttribute('title',e.params.title),_isReady=!0,window.awemediatag&&window.awemediatag.hideLoader();let o=new CustomEvent('awe-ready',{detail:{name:e.id},bubbles:!0,cancelable:!1});e.ifr.dispatchEvent(o)}function showWidget(e,t,n,a){const o=a||{};if(o.isOpen=e.isOpen,o.openerIdx=e.opener?e.opener.dataset.swnIdx:null,e.hasCtnrUpdates){const t='string'==typeof e.hasCtnrUpdates?e.hasCtnrUpdates:null;e.hasCtnrUpdates=!1;const n=getDataAttributes(document.getElementById(e.params.containerId),e.params.enabledCountries,e.params,t);Object.assign?Object.assign(o,n):Object.keys(n).forEach((function(e){o[e]=n[e]}))}e.isOpen||(e.params.containerId?e.ifr.classList.remove('swn-awe-ifr-closed'):(e.ifr.parentElement.classList.remove('swn-awe-popin-ctnr-closed'),e.ifr.parentElement.classList.remove('swn-awe-popin-ctnr-closed-done')),o.trackdploy={auto:t,src:n}),sendMessage(e,{action:'awe:open',params:o}),e.isOpen=!0,document.body.parentElement.classList.add(`swn-open-${e.id}`),e.params.scrollToWidget&&e.ifr.scrollIntoView({behavior:'smooth'})}function sendMessage(e,t){e||(e=instances[0]),e.ifrLoaded&&ifrOrigin?e.ifr.contentWindow&&e.ifr.contentWindow.postMessage(t,ifrOrigin):e.messageQueue.push(t)}function processMessageQueue(e){const t=e.messageQueue.length;for(let n=0;n<t;n++){const t=e.messageQueue.shift();sendMessage(e,t)}}function injectDefaultStyle(){if(document.getElementById('swn-default-style'))return;const e=`\n    .swn-awe-ifr{\n      display:block;\n      position: relative;\n      box-sizing: border-box;\n      border:none;\n      transition:height 250ms ease-in-out;\n      opacity: 1;\n    }\n    .swn-awe-ifr-closed{\n      height: 0 !important;\n    }\n    #swn-awe-popin-ctnr{\n      position: fixed;\n      display: block;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      z-index: 2147000000;\n      opacity: 1;\n      transition: opacity 250ms ease-in-out;\n      visibility: visible;\n    }\n    #swn-awe-popin-ctnr.swn-awe-popin-ctnr-closed{\n      opacity: 0;\n    }\n    #swn-awe-popin-ctnr.swn-awe-popin-ctnr-closed-done{\n      visibility: hidden !important;\n    }\n    #swn-awe-popin-ctnr:before{\n      content: '';\n      display: block;\n      position: absolute;\n      width:100%;\n      height:100%;\n      opacity:.6;\n      background:#ccc;\n    }\n\n    #swn-awe-popin-ctnr iframe{\n      position: fixed;\n      top: 50%;\n      transform: translate(0, -50%);\n      z-index: 1500;\n      max-height: 100vh;\n    }\n\n    #swn-awe-popin-ctnr .swn-media{\n      top: 0;\n      left: 0;\n      top: 0;\n      transform: none;\n    }\n\n    .swn-fullscreen:not(.swn-awe-ifr-closed){\n      position: fixed !important;\n      top: 0 !important;\n      left: 0 !important;\n      width: 100vw !important;\n      height: 100vh !important;\n      max-width: none !important;\n      max-height: none !important;\n      z-index: 2147483647 !important;\n    }\n\n    #swn-modal-overlay {\n      transform:scale(0);\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      max-width: none;\n      max-height: none;\n      background-color: #0006;\n    }\n\n    #swn-modal-overlay.swn-cloak {\n      z-index: 150;\n      transform: none;\n    }\n\n    .swn-awe-btn{\n      display: inline-block;\n      position: fixed;\n      background: var(--cta-bg-color, #1a1a1a);\n      color: var(--cta-color, #fff);\n      padding: var(--cta-padding, 12px 18px);\n      cursor: pointer;\n      right: 0;\n      top: 50%;\n      transform: translateY(-50%);\n      border-radius: var(--cta-border-radius, 10px) 0 0 var(--cta-border-radius, 10px);\n      border-width: var(--cta-border-width, 2px);\n      border-right-width: 0;\n      border-style: var(--cta-border-style, none);\n      border-color: var(--cta-border-color, #1a1a1a);\n      font-size: 1rem;\n      font-family: inherit;\n      z-index:9999;\n    }\n\n    .swn-awe-btn:focus,\n    .swn-awe-btn:hover{\n      background: var(--cta-hover-bg-color, var(--cta-color, #fff));\n      color: var(--cta-hover-color, var(--cta-bg-color, #1a1a1a));\n      border-color: var(--cta-hover-color, var(--cta-bg-color, #1a1a1a));\n    }\n\n    .swn-awe-btn.swn-awe-btn-disabled{\n      visibility: hidden;\n    }\n    .swn-awe-btn.rtl{\n      right: auto;\n      left: 0;\n      border-radius: 0 var(--cta-border-radius, 10px) var(--cta-border-radius, 10px) 0;\n    }\n    .swn-awe-btn:not(.swn-lp-btn){\n      display:flex;\n      flex-flow: var(--swn-cta-direction, row) nowrap;\n      align-items: center;\n    }\n    .swn-awe-btn:not(.swn-lp-btn).rtl{\n      --swn-cta-direction: row-reverse;\n    }\n\n    .swn-cta-txt:before{\n      text-transform: uppercase;\n    }\n\n    .swn-hidden{\n      display: none !important;\n      opacity: 0;\n    }\n\n    @font-face {\n      font-family: 'swn-lp-cart';\n      src: url('${HOST}/awe/${WIDGET_ENGINE_VERSION}/${BUILD_NUMBER}/fonts/cart.woff') format('woff');\n      font-weight: normal;\n      font-style: normal;\n    }\n\n    .swn-cta-cart{\n      font-family: 'swn-lp-cart' !important;\n      font-style: normal;\n      font-weight: normal;\n      speak: none;\n      display: inline-block;\n      text-decoration: inherit;\n      width: 1em;\n      text-align: center;\n      font-variant: normal;\n      text-transform: none;\n      line-height: 1em;\n      -webkit-font-smoothing: antialiased;\n      -moz-osx-font-smoothing: grayscale;\n      transform: rotate(var(--swn-cta-icon-rotation, -15deg));\n    }\n\n    .swn-cta-cart:only-child{\n      font-size: 2em;\n    }\n\n    .swn-awe-btn:not(.rtl) .swn-cta-txt:not(:first-child){\n      margin-left:.5em;\n    }\n    .swn-awe-btn.rtl .swn-cta-txt:not(:first-child){\n      margin-right:.5em;\n    }\n    img.swn-cta-icon {\n      width: var(--cta-icon-width, 30px);\n    }\n    .swn-cta-img{\n      width:100%;\n      object-fit: contain;\n    }\n\n    @media (max-width:600px){\n      .swn-awe-btn.mobile-bottom{\n        position: fixed;\n        width:100%;\n        top: unset;\n        bottom:0;\n        justify-content: center;\n        transform: none;\n        --cta-border-radius:0 !important;\n        border-width: 0;\n        box-shadow: #222 0px -3px 20px 0px;\n        width: 100% !important;\n      }\n      .swn-awe-btn.mobile-bottom img{\n        min-height: 15px;\n        max-height: 9vh;\n      }\n\n      .swn-awe-btn:not(.mobile-bottom) .swn-cta-icon + .swn-cta-txt{\n        display: none;\n      }\n    }\n    \n    `;var t='';Object.keys(L20nKeys).forEach((function(e){t+='.swn-awe-btn:not(.swn-lp-btn).'+e+' .swn-cta-txt:before{content:\''+L20nKeys[e].OPEN+'\'}'}));const n=document.createElement('style');n.id='swn-default-style',n.innerHTML=e+t,document.head.appendChild(n)}function injectDefaultDynamicStyle(e){const t=document.createElement('style');t.classList.add('swn-default-dynamic-style'),t.innerHTML=`\n    .swn-open-${e} .swn-force-static-${e}{\n      position: static !important;\n    }\n\n    .swn-open-${e}.swn-noscroll-${e} body{\n      overflow: hidden !important;  \n    }\n\n    .swn-open-${e}.swn-noscroll-${e}{\n      scrollbar-width: none;\n    }\n\n    .swn-open-${e}.swn-noscroll-${e}::-webkit-scrollbar {\n      display: none;\n    }\n    \n    `,document.head.appendChild(t)}function injectInstanceStyle(e){if('lp-legacy'===e.params.template){const t=!(!e.wtbConf.enableremoteconf||!e.wtbConf.widgetclientparams)&&e.wtbConf.widgetclientparams.params['global-border-radius']||'10px',n=document.createElement('style');n.id='swn-style-'+e.id,n.innerHTML=`\n        @media screen and (min-width: 631px){\n          .swn-awe-ifr[name="${e.id}"]{\n            border-radius: ${t};\n          }\n        }\n      `,document.head.appendChild(n)}}function prependColor(e){return e?(/^[\da-f]{3,8}$/i.test(e)?'#':'')+e:e}function setStickyCustomStyle(e,t){if(!t.wtbConf.enableremoteconf||!t.wtbConf.widgetclientparams||!t.wtbConf.widgetclientparams.params)return;const n=t.wtbConf.widgetclientparams.params,a={},o={},s={},i={},r=/^https?:\/\/[\w\.\\\/:\-]+$/i,l=/^<svg.+<\/svg>$/s,c=n['cta-layout'];n['cta-mobile-bottom']&&e.classList.add('mobile-bottom');let d='';const u=prependColor(n['cta-background-color']);let m=prependColor(n['cta-hover-bg-color']),p=n['cta-img-url'];if(p){const t=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);t<=600&&n['cta-mobile-img-url']&&(p=n['cta-mobile-img-url']),p&&r.test(p)&&(e.innerHTML=`<img class="swn-cta-img" src="${p}">`),o['--cta-bg-color']=u||'transparent',o['--cta-hover-bg-color']=m||u||'transparent',o['--cta-padding']=0,(t>600||!n['cta-mobile-bottom'])&&(a.transform='translateY(-50%) scale(1.15)',a['transform-origin']='center right')}else{let t=!1,r=!0,p=!1;if(u&&(o['--cta-bg-color']=u,t=isLight(u),o['--cta-color']=t?'#1a1a1a':'#fff',t&&(o['--cta-border-style']='solid')),n['cta-border-radius']&&(o['--cta-border-radius']=n['cta-border-radius']),n['embedded-btn-focus-outline']&&(a.outline=`${n['embedded-btn-focus-outline']}`),m&&(p=!0,a['--cta-hover-bg-color']=m,r=isLight(m),a['--cta-hover-color']=r?'#1a1a1a':'#fff'),a['--cta-border-style']=p&&!r||!p&&t?'none':'solid',!c||'icon'===c||'icon+text'===c){let e=n['cta-icon'];if(e&&l.test(e)){const t=e.match(/width="(\d+)"/),n=e.match(/height="(\d+)"/);d+='<div class="swn-cta-icon"></div>',s.width=(t?t[1]:'15')+'px',s.height=(n?n[1]:'15')+'px';const r=o['--cta-color']||'#fff';let l=e.replace(/>/,` style="fill:${r};stroke:${r};">`);s['background-image']=`url("data:image/svg+xml;base64,${btoa(l)}")`;const c=a['--cta-hover-color']||o['--cta-bg-color']||'#1a1a1a;';l=e.replace(/>/,` style="fill:${c};stroke:${c};">`),i['background-image']=`url("data:image/svg+xml;base64,${btoa(l)}")`}else d+='<span class="swn-cta-icon swn-cta-cart">&#xe800;</span>'}c&&'text'!==c&&'icon+text'!==c||(d+='<span class="swn-cta-txt"></span>'),d&&(e.innerHTML=d)}let f='';const g='.swn-awe-btn.swn-'+t.id;let b=Object.entries(o);const w=n['embedded-btn-custom-css'],h=w&&!w.includes('@media')&&!w.includes('{');(h||b.length>0)&&(f=`${g}{\n        ${b.map((e=>e[0]+': '+e[1]+';')).join('')}\n        ${h?w:''}\n      }`);const y=Object.entries(s);y.length&&(f+=`.swn-cta-icon{\n        ${y.map((e=>e[0]+': '+e[1]+';')).join('')}\n      }`),b=Object.entries(a),(n['embedded-btn-custom-css-focus-hover']||b.length>0)&&(f+=`\n      ${g}:focus,\n      ${g}:hover{\n        ${b.map((e=>e[0]+': '+e[1]+';')).join('')}\n        ${n['embedded-btn-custom-css-focus-hover']||''}\n      }`);const C=Object.entries(i);if(C&&(f+=`${g}:focus .swn-cta-icon, ${g}:hover .swn-cta-icon{\n      ${C.map((e=>e[0]+': '+e[1]+';')).join('')}\n    }`),n['cta-label']&&(f+=`${g}:not(.swn-lp-btn) .swn-cta-txt:before{ content:'${n['cta-label']}'; }`),Object.entries(t.params.localesConf).forEach((([e,t])=>{t.ctaLabel&&(f+=`${g}.${e}:not(.swn-lp-btn) .swn-cta-txt:before{ content:'${t.ctaLabel}'; }`)})),w&&!h&&(f+=w),f){const e=document.createElement('style');e.id='swn-awe-cta-style-'+t.id,e.innerHTML=f,document.head.appendChild(e)}}function getLegacyEmbeddedBtnStyle(e){const t=e.wtbConf.widgetclientparams.params,n=e.params.locales[0],a=e.params.localesConf[n],o={};return o.positionX=t['button-position-x']||'default',o.positionY=t['button-position-y']||'middle',a&&a.buttonText?o.text=a.buttonText:o.text=t['button-text']&&t['button-text'].trim()?t['button-text']:'',o.fontSize=t['button-font-size']||'37px',o.color=t['button-color']||'ffffff',o.colorHover=t['button-color-hover']||o.color,o.bg=t['button-bg']&&t['button-bg'].trim()?t['button-bg']:'none',o.bgHover=t['button-bg-hover']&&t['button-bg-hover'].trim()?t['button-bg-hover']:'',o.transition=t['button-transition']||'0ms',o.borderRadius=t['button-border-radius']||'0px',o.border=t['button-border']||'',o.borderHover=t['button-border-hover']||'',o.textTransform=t['button-text-transform']||'inherit',o.iconSide=t['button-icon-side']||'left',o.iconRotation=t['button-icon-rotation']||'-15deg',o.mobileThreshold=t['button-mobile-threshold']||'630px',o.zIndex=t['button-z-index']||'9999',o.zIndexMobile=t['button-z-index-mobile']||o.zIndex,o.width=t['button-img-width'],o.height=t['button-img-height'],o.mobileWidth=t['button-img-width-mobile'],o.mobileHeight=t['button-img-height-mobile'],a&&a.buttonImgUrl?o.imgUrl=a.buttonImgUrl:o.imgUrl=t['button-img-url']||'',a&&a.buttonImgUrlMobile?o.imgUrlMobile=a.buttonImgUrlMobile:o.imgUrlMobile=t['button-img-url-mobile']||o.imgUrl,o.padding=t['button-padding']&&t['button-padding'].trim(),o.padding||(o.imgUrl||o.imgUrlMobile?o.padding='0':o.padding='12px'),o}function addButtonStyle(e,t){let n,a,o='left:0; right: auto;';switch(e.positionX){case'left':n='left:0',o='left:0; right: auto;';break;case'middle':n='left:50%; transform: translateX(-50%);',o='left:50%; transform: translateX(-50%); right: auto;';break;case'right':n='right:0',o='left:auto; right:0;';break;case'default':n='right:0',o='left:0; right: auto;';break;default:n=e.positionX,o=(s=e.positionX).indexOf('left')>-1?s.replace('left','right')+'; left: auto;':s.indexOf('right')>-1?s.replace('right','left')+'; right: auto;':void 0}var s;switch(e.positionY){case'top':a='top:0';break;case'middle':a='top:50%; transform: translateY(-50%);';break;case'bottom':a='bottom:0';break;default:a=e.positionY}let i=document.createElement('style'),r='none'!=e.iconSide?'display: none;':'';i.setAttribute('id','swn-lp-embedded-button-style-'+t),i.innerHTML=`\n      .swn-${t} .swn-lp-cart:before {\n        content: '\\e800';\n        font-family: 'swn-lp-cart' !important;\n        font-style: normal;\n        font-weight: normal;\n        speak: none;\n\n        display: inline-block;\n        text-decoration: inherit;\n        width: 1em;\n        text-align: center;\n        font-variant: normal;\n        text-transform: none;\n        line-height: 1em;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n        transform: rotate(${e.iconRotation});\n      }\n\n      .swn-${t}.swn-awe-btn {\n        display: none;\n        margin: 0;\n\t      vertical-align: baseline;\n        z-index: ${e.zIndex};\n        position: fixed;\n        ${n};\n        ${a};\n        font-size: ${e.fontSize};\n        color: #${e.color};\n        border: ${e.border};\n        background: ${e.bg};\n        transition: all ${e.transition};\n        padding: ${e.padding};\n        border-radius: ${e.borderRadius};\n        text-transform: ${e.textTransform};\n        user-select: none;\n        cursor: pointer;\n      }\n\n      .swn-${t}.swn-awe-btn.rtl {\n        ${o};\n      }\n\n      .swn-${t}.swn-awe-btn-enabled {\n        display: block;\n      }\n\n      .swn-${t}.swn-awe-btn img {\n        display: block;\n        margin: 0;\n        padding: 0;\n        border: 0;\n        font: inherit;\n        font-size: 100%;\n        max-width: 100%;\n        max-height: 100%;\n      }\n\n      /* set auto only for non-svg img.\n         For svg it overrides the width/height attributes, and makes them invisible */\n      .swn-${t}.swn-awe-btn img:not([src$=".svg"]) {\n        height: auto;\n        width: auto;\n      }\n\n      .swn-${t}.swn-awe-btn .swn-lp-embedded-button-img-mobile {\n        display: none;\n      }\n\n      .swn-${t}.swn-awe-btn .swn-lp-embedded-button-img-mobile[src$=".svg"] {\n        ${e.mobileWidth?'width:'+e.mobileWidth+'px;':''}\n        ${e.mobileHeight?'height:'+e.mobileHeight+'px;':''}\n      }\n      .swn-${t}.swn-awe-btn .swn-lp-embedded-button-img-desktop[src$=".svg"] {\n        ${e.width?'width:'+e.width+'px;':''}\n        ${e.height?'height:'+e.height+'px;':''}\n      }\n\n      .swn-${t}.swn-awe-btn:hover, .swn-${t}.swn-awe-btn:focus {\n        color: #${e.colorHover};\n        background: ${e.bgHover};\n        border: ${e.borderHover};\n      }\n\n      @media screen and (max-width: ${e.mobileThreshold}){\n        .swn-${t}.swn-awe-btn {\n          z-index: ${e.zIndexMobile};\n        }\n        .swn-${t}.swn-awe-btn .swn-lp-embedded-button-img-mobile {\n          display: block;\n        }\n        .swn-${t}.swn-awe-btn .swn-lp-embedded-button-img-desktop {\n          display: none;\n        }\n        .swn-${t}.swn-awe-btn span {\n           /* hide text only if picto is shown */\n          ${r}\n        }\n      }\n    `,document.head.appendChild(i)}function getSizeAttributes(e,t){let n='';return e&&(n+=`width="${e}"`),t&&(n+=`height="${t}"`),n}function processButtons(e){var t=[];if(e.params.embeddedBtn){let n;if(n=e.params.eans&&e.params.eans[e.params.defaultCountry]?e.params.eans:getEansfromButtons(e.params,e.params.btns),n){const a=setEmbeddedBtn(e,n);document.body.insertBefore(a,document.body.firstChild),t.push(a)}}if(e.params.btnSelector){const n=document.querySelectorAll(e.params.btnSelector);for(let a=0;a<n.length;a++)n[a].dataset.swnIdx=++e.btnIndex,t.push(n[a])}if(e.params.btns)for(let n=0;n<e.params.btns.length;n++)e.params.btns[n].dataset.swnIdx=++e.btnIndex,t.push(e.params.btns[n]);return t.length>0&&checkAvailOrBindButtons(t,e,!1),e.params.ajaxButton&&(e.ajaxCheckItv=setInterval((function(){let t=document.querySelectorAll(appendSelector(e.params.btnSelector,':not(.swn-bound)'));if(t.length>0){const n=[];for(let a=0;a<t.length;a++)t[a].dataset.swnIdx=++e.btnIndex,n.push(t[a]);checkAvailOrBindButtons(n,e,!0)}}),1e3)),delete e.params.btns,t.length}function checkAvailOrBindButtons(e,t,n){if(window.IntersectionObserver&&void 0===t.btnTracking.observer&&(t.btnTracking.observer=new IntersectionObserver((function(e,n){const a=e[0];a&&a.isIntersecting&&a.intersectionRatio>=n.thresholds[0]&&(n.disconnect(),t.btnTracking.observer=null,sendMessage(t,{action:'awe:tracking',params:{event:'btn_visible'}}))}),{root:null,rootMargin:'0px',threshold:.8})),n&&t.params.embeddedBtn&&!document.body.querySelector(`.swn-awe-btn.swn-${t.id}`)){const n=getEansfromButtons(t.params,e);if(n&&n[t.params.defaultCountry]){const a=setEmbeddedBtn(t,n,!0);document.body.insertBefore(a,document.body.firstChild),e.push(a)}}if(t.params.availPrdOnly){let n=getDistinctScopes(e,t);Object.keys(n).length>0?checkBtnAvailability(n,t):(console.error('Buttons have no scope defined'),disableButtons(e,t,'no_scope')),monitorCustomButtons(e,t)}else if(t.params.eans&&t.params.eans[t.params.defaultCountry])getDistinctScopes(e,t),bindButtons(e,t);else{const n=[],a=[];for(let o=0;o<e.length;o++)isValueDefined(e[o].dataset.mmIds)||isValueDefined(e[o].dataset.eans)||isValueDefined(e[o].dataset[toCamelCase('mm-ids-'+t.params.defaultCountry)])||isValueDefined(e[o].dataset[toCamelCase('eans-'+t.params.defaultCountry)])||e[o].classList.contains('swn-awe-btn')?n.push(e[o]):a.push(e[o]);getDistinctScopes(n,t),bindButtons(n,t),a.length>0&&(disableButtons(a,t,'no_scope'),monitorCustomButtons(a,t))}}function setEmbeddedBtn(e,t,n){null==n&&(n=!1);const a=!(!e.wtbConf.enableremoteconf||!e.wtbConf.widgetclientparams),o=document.createElement('button');if(a&&'lp-legacy'===e.params.template){const t=getLegacyEmbeddedBtnStyle(e);if(addButtonStyle(t,e.id),t.imgUrl){let e='',n='';t.imgUrl.endsWith('.svg')&&(e=getSizeAttributes(t.width,t.height)),t.imgUrlMobile.endsWith('.svg')&&(n=getSizeAttributes(t.mobileWidth,t.mobileHeight)),o.innerHTML=`<img class="swn-lp-embedded-button-img-desktop" src="${t.imgUrl}" ${e}/><img class="swn-lp-embedded-button-img-mobile" src="${t.imgUrlMobile}" ${n}/>`}else{let e='<i class="swn-lp-cart"></i>';o.innerHTML='<span>'+t.text+'</span>','left'===t.iconSide?o.innerHTML=e+o.innerHTML:'right'===t.iconSide&&(o.innerHTML=o.innerHTML+e)}o.classList.add('swn-lp-btn')}else a&&setStickyCustomStyle(o,e);if(o.classList.add('swn-awe-btn'),o.classList.add('swn-'+e.id),n||o.classList.add('swn-hidden'),e.params.theme)for(let t=0;t<e.params.theme.length;t++)o.classList.add(e.params.theme[t]);if(e.params.locales.length>0&&e.params.locales[0]){o.classList.add(e.params.locales[0]);const t=e.params.locales[0].split('-')[0];t!=e.params.locales[0]&&o.classList.add(t)}t&&Object.keys(t).forEach((function(e){const n=toCamelCase('mm-ids-'+e);o.dataset[n]=t[e].join(',')})),e.params.defaultEan&&Object.keys(e.params.defaultEan).forEach((function(t){const n=toCamelCase('mm-default-id-'+t);o.dataset[n]=e.params.defaultEan[t]})),o.setAttribute('tabindex','0');let s=e.params.locales[0]||'en',i=L20nKeys[s]&&L20nKeys[s].OPEN_LBL;return!i&&s.length>4&&(s=s.split('-')[0],i=L20nKeys[s]&&L20nKeys[s].OPEN_LBL),o.setAttribute('aria-label',i||'Open the widget'),o.dataset.swnIdx=0,o}function isLight(e){return!!e&&toHSL(e).l>=70}function toHSL(e){e.length<6&&(e=e.replace(/(\w)/g,'$1$1'));let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),n=parseInt(t[1],16),a=parseInt(t[2],16),o=parseInt(t[3],16);n/=255,a/=255,o/=255;let s,i,r=Math.max(n,a,o),l=Math.min(n,a,o),c=(r+l)/2;if(r==l)s=i=0;else{let e=r-l;switch(i=c>.5?e/(2-r-l):e/(r+l),r){case n:s=(a-o)/e+(a<o?6:0);break;case a:s=(o-n)/e+2;break;case o:s=(n-a)/e+4}s/=6}return i*=100,i=Math.round(i),c*=100,c=Math.round(c),s=Math.round(360*s),{h:s,s:i,l:c}}function monitorCustomButtons(e,t){function n(e,t,n){const a=e.target.getAttribute(e.attributeName).toString().replace(/\s+/g,'');t[a]=t[a]||[],t[a].push(e.target),n.btnTracking.scopes=n.btnTracking.scopes||{},n.btnTracking.scopes[a]=n.btnTracking.scopes[a]||[],n.btnTracking.scopes[a].push(e.target.dataset.swnIdx)}function a(e,t,n){const a=e.target.getAttribute(e.attributeName).toString().replace(/\s+/g,'');if(!e.oldValue&&a){isValidEanList(a.replace(/\s+/g,'').split(',').filter(isValueDefined))&&t.push(e.target)}else e.oldValue&&!a&&n.push(e.target)}!t.observer&&window.MutationObserver&&(t.observer=new MutationObserver((function(e){const o={},s=[],i=[];for(let r=0;r<e.length;r++){const l=e[r];t.params.availPrdOnly?n(l,o,t):a(l,s,i)}t.params.availPrdOnly?checkBtnAvailability(o,t):(bindButtons(s,t),disableButtons(i,t,'scope-removed'))})));const o={attributes:!0,attributeFilter:t.params.availCheckDefaultPrdOnly?['data-mm-default-id','data-mm-default-id-'+t.params.defaultCountry.toLowerCase(),'data-default-ean','data-default-ean-'+t.params.defaultCountry.toLowerCase()]:['data-mm-ids','data-mm-ids-'+t.params.defaultCountry.toLowerCase(),'data-eans','data-eans-'+t.params.defaultCountry.toLowerCase()],attributeOldValue:!0,characterData:!1,childList:!1,subtree:!1};for(let n=0;n<e.length;n++)t.observer.observe(e[n],o)}function checkBtnAvailability(e,t){const n=getPersistedLocation();Object.keys(e).forEach((function(a){let o=e[a];_checkAvailability(a,t.params.wtbid,t.params.defaultCountry,n,t.availChecks,(function(e,n){if(e||!n)return e&&console.error(e),void disableButtons(o,t,'error');n.available?bindButtons(o,t):disableButtons(o,t,'unavailable')}))}))}function checkGlobalEansAvailability(e){let t;if(e.params.availCheckDefaultPrdOnly&&e.params.defaultEan?t=e.params.defaultEan[e.params.defaultCountry]:e.params.eans&&(t=e.params.eans[e.params.defaultCountry]),t){const n=document.getElementById(e.params.containerId);_checkAvailability(t,e.params.wtbid,e.params.defaultCountry,getPersistedLocation(),e.availChecks,_getCtnrAvailCheckCallback(n,e))}}function _getCallbackWrapper(e){return function(t,n){const a=availCheckCallbacks.get(e);availCheckCallbacks.delete(e),a&&a.forEach((function(e){e(t,n)}))}}function _checkAvailability(e,t,n,a,o,s){let i=`https://wtb-api-hub.swaven.com/wtb/v2/api/search/products/${e}/status?forceAuto=true&lang=fr&av=true&wtbid=${t}&defaultCountry=${n}&country=${n}`;if(a){const e=`&lat=${a.latitude}&lng=${a.longitude}&zc=${a.zipCode}&addr=${a.address}&cc=${a.country}&src=${a.source}&city=${a.city}&state=${a.region}`;i+=e}const r=o&&o.runningReqs;if(availCheckResults.has(i))return s(null,availCheckResults.get(i)),void track('avail-check',{cached:!0,url:i},!0);if(availCheckCallbacks.has(i))return availCheckCallbacks.get(i).push(s),void track('avail-check',{pending:!0,url:i},!0);availCheckCallbacks.set(i,[s]);const l=_getCallbackWrapper(i);if('function'==typeof Promise&&o&&o.promises){const e=new Promise((function(e,t){_makeAvailCheckRequest(i,l,r,e,t)}));o.promises.push(e),e.catch((function(){}))}else _makeAvailCheckRequest(i,l,r)}function _makeAvailCheckRequest(e,t,n,a,o){const s=new XMLHttpRequest;n&&n.add(s),s.onload=function(){let n,i;if(200===s.status)try{n=JSON.parse(s.response)}catch(e){i=new Error('Response is not valid JSON.')}else i=new Error(`Availability error (code ${s.status}). Url: ${e}`);n&&availCheckResults.set(e,n),a&&n&&n.available?a():o&&o(),t(i,n)},n&&(s.ontimeout=s.onloadend=function(){n.delete(s)}),s.open('GET',e,!0),s.withCredentials=!0,s.send(null)}function disableButtons(e,t,n){if(null!=e&&0!==e.length)for(let a=0;a<e.length;a++)e[a].classList.contains('swn-awe-btn-disabled')||(e[a].classList.add('swn-bound'),e[a].classList.add('swn-awe-btn-disabled'),e[a].hasAttribute('data-swn-instance')&&(e[a].classList.remove('swn-awe-btn-enabled'),e[a].removeEventListener('click',clickHandler),e[a].removeAttribute('data-swn-instance')),track('btn_unavailable',{idx:null!=e[a].dataset.swnIdx?e[a].dataset.swnIdx:'',reason:n,wtbid:t.params.wtbid,module:mapModule(t.wtbConf.module).toLowerCase(),iid:t.id}))}function bindButtons(e,t){t.btnTracking.boundIdx||(t.btnTracking.boundIdx=[]);for(let n=0;n<e.length;n++)e[n].classList.contains('swn-awe-btn-enabled')||(e[n].addEventListener('click',clickHandler),e[n].addEventListener('keydown',(e=>{if(e.repeat&&'Enter'===e.key)return e.preventDefault();'Enter'===e.key&&clickHandler(e)})),e[n].classList.add('swn-bound'),e[n].classList.add('swn-awe-btn-enabled'),e[n].dataset.swnInstance=t.id,e[n].classList.remove('swn-awe-btn-disabled'),t.btnTracking.boundIdx.push(e[n].dataset.swnIdx),t.btnTracking.observer&&t.btnTracking.observer.observe(e[n]));e.length&&(clearTimeout(t.btnTracking.timeoutId),t.btnTracking.timeoutId=setTimeout((function(){const e=Object.keys(t.btnTracking.scopes).filter((function(e){const n=t.btnTracking.scopes[e];for(let e=0;e<n.length;e++){if(t.btnTracking.boundIdx.indexOf(n[e])>-1)return!0}return!1})).map((function(e){return e+':'+t.btnTracking.scopes[e].filter((function(e){return t.btnTracking.boundIdx.indexOf(e)>-1})).join(',')})).join('/');sendMessage(t,{action:'awe:tracking',params:{event:'btn',idx:t.btnTracking.boundIdx,reqpid:e}})}),1e3))}function clickHandler(e){const t=findInstance(e.currentTarget.dataset.swnInstance);let n=t.ifr,a='swn-awe-ifr-closed';if(t.params.containerId||(n=n.parentElement,a='swn-awe-popin-ctnr-closed'),e.currentTarget!==t.opener){const n=getDataAttributes(e.currentTarget,t.params.enabledCountries,t.params);t.opener=e.currentTarget,showWidget(t,!1,null,n)}else sendMessage(t,{action:'awe:tracking',params:{event:'close'}}),closeWidget(t);e.preventDefault()}function getDistinctScopes(e,t){const n={};for(let a=0;a<e.length;a++){let o,s=e[a];if(t.params.availCheckDefaultPrdOnly&&(o=s.dataset[toCamelCase('mm-default-id-'+t.params.defaultCountry)]||s.dataset[toCamelCase('default-ean-'+t.params.defaultCountry)]||s.dataset.mmDefaultId||s.dataset.defaultEan||t.params.defaultEan&&t.params.defaultEan[t.params.defaultCountry]),o||(o=getValidScope(s,t)),o){let e=o.toString().replace(/\s+/g,'');n[e]=n[e]||[],n[e].push(s),t.btnTracking.scopes=t.btnTracking.scopes||{},t.btnTracking.scopes[e]=t.btnTracking.scopes[e]||[],t.btnTracking.scopes[e].push(s.dataset.swnIdx)}else disableButtons([s],t,'no_scope')}return n}function getValidScope(e,t){const n=t.params.defaultCountry,a=e.dataset[toCamelCase('mm-ids-'+n)]||e.dataset[toCamelCase('eans-'+n)];let o=t.params.idType;if((e.dataset.mmIdType||e.dataset.idType)&&(o=t.params.idType=e.dataset.mmIdType||e.dataset.idType),a){let e=a.replace(/\s+/g,'').split(',').filter(isValueDefined);if(hasValidEan(e,o))return isGTIN(o)?e.map(padEan):e;console.error('button country-specific ('+n+') eans/range are invalid: '+a)}if(e.dataset.mmIds||e.dataset.eans){let t=(e.dataset.mmIds||e.dataset.eans).replace(/\s+/g,'').split(',').filter(isValueDefined);if(hasValidEan(t,o))return isGTIN(o)?t.map(padEan):t;console.error('button eans/range are invalid: '+e.dataset.mmIds||e.dataset.eans)}if(t.params.eans&&t.params.eans[n]){if(hasValidEan(t.params.eans[n],o))return t.params.eans[n];console.error('widget eans/range ('+n+') are invalid: '+t.params.eans[n])}return null}function getDataAttributes(e,t,n,a){var o={},s={},i={};let r=n.idType;return(e.dataset.mmIdType||e.dataset.idType)&&(r=n.idType=e.dataset.mmIdType||e.dataset.idType,o.idType=r),(e.dataset.mmTheme||e.dataset.theme)&&(o.theme=(e.dataset.mmTheme||e.dataset.theme).split(',')),!e.dataset.mmIds&&!e.dataset.eans||a&&'eans'!==a||t.forEach((function(t){const n=(e.dataset.mmIds||e.dataset.eans).split(',').map((function(e){return e.replace(/\s+/g,'')})).filter(isValueDefined);s[t]=isGTIN(r)?n.map(padEan):n})),!e.dataset.mmDefaultId&&!e.dataset.defaultEan||a&&'default'!==a||t.forEach((function(t){const n=(e.dataset.mmDefaultId||e.dataset.defaultEan).replace(/\s+/g,'');i[t]=isGTIN(r)?padEan(n):n})),t.forEach((function(t){let n=toCamelCase('eans-'+t),o=toCamelCase('mm-ids-'+t);if((e.dataset[o]||e.dataset[n])&&(!a||'eans'===a)){const a=(e.dataset[o]||e.dataset[n]).split(',').map((function(e){return e.replace(/\s+/g,'')})).filter(isValueDefined);s[t]=isGTIN(r)?a.map(padEan):a}if(n=toCamelCase('default-ean-'+t),o=toCamelCase('mm-default-id-'+t),(e.dataset[o]||e.dataset[n])&&(!a||'default'===a)){const a=(e.dataset[o]||e.dataset[n]).replace(/\s+/g,'');i[t]=isGTIN(r)?padEan(a):a}})),Object.keys(s).length>0&&(o.eans=s),Object.keys(i).length>0&&(o.defaultEan=i),o}function toCamelCase(e){return e.toLowerCase().replace(/-[a-z]/gi,(function(e,t){return e[1].toUpperCase()}))}function closeWidget(e){e.params.containerId?e.ifr.classList.add('swn-awe-ifr-closed'):(e.ifr.parentElement.classList.add('swn-awe-popin-ctnr-closed'),setTimeout((function(){e.ifr.parentElement.classList.add('swn-awe-popin-ctnr-closed-done')}),251),document.documentElement.classList.remove(`swn-noscroll-${e.id}`)),e.opener&&e.opener.isConnected?(e.opener.focus(),e.opener!==document.activeElement&&window.parent.focus()):window.parent.focus(),e.opener=null,e.isOpen=!1,document.body.parentElement.classList.remove(`swn-open-${e.id}`),sendMessage(e,{action:'awe:close'})}function removeClass(e){for(var t=document.getElementsByClassName(e);t.length>0;)t[0].classList.remove(e)}function getPersistedLocation(){var e=sessionStorage.getItem(ADDRESS_STORAGE_KEY);return e?JSON.parse(e):null}function getLocation(e,t,n){const a=findInstance(e);if(navigator.geolocation&&'https:'===location.protocol){if(a.params.disableAutoBrowserGeoloc&&t)return;navigator.geolocation.getCurrentPosition((function(e){sendMessage(a,{action:'awe:getLocation',_mid:n,lng:e.coords.longitude,lat:e.coords.latitude})}),(function(){sendMessage(a,{action:'awe:getLocation',_mid:n})}),{timeout:1e4})}else sendMessage(a,{action:'awe:getLocation',_mid:n})}function addScript(e){if(e.indexOf('<\/script>')>-1){const t=e.match(/<script.*?<\/script>/gs);t&&t.forEach((function(e){const t=e.match(/<script.*?>/)[0].match(/src=['"](.*)['"]/),n=document.createElement('script');t?n.src=t[1]:n.innerHTML=e.replace(/<script.*?>/,'').replace('<\/script>',''),document.body.appendChild(n)}))}else{const t=document.createElement('script');t.innerHTML='try{'+e+'}catch(err){console.error(err)}',document.body.appendChild(t)}}function injectHostStyle(e,t){if(e){let n=document.createElement('style');n.innerText=e.replace(/\.swn-force-static/g,`.swn-force-static-${t}`),n.id='host-style-'+t,document.body.appendChild(n)}const n=document.getElementsByClassName('swn-'+t);for(let e=0;e<n.length;e++)n.item(e).classList.remove('swn-hidden')}function getOptionValue(e,t,n,a){return e&&null!=t.params[n]?t.params[n]:a}function selectCountry(e){const t=e.wtbConf.countries;let n=e.params.countries||e.wtbConf.countries;if('string'==typeof n&&(n=n.split(',').map((function(e){return e.trim()}))),!n||0===n.length)throw sendMessage(e,{action:'awe:log',params:{event:'contextCountries_missing'}}),new Error('No context countries provided');const a=n.filter((function(e){return-1!==t.indexOf(e)})),o=n.filter((function(e){return-1===t.indexOf(e)}));if(0===a.length)throw sendMessage(e,{action:'awe:log',params:{event:'enabledCountries_empty'}}),new Error('NO_ENABLED_COUNTRIES');if(o.length>0&&console.error('Context countries missing in config: '+o.join(', ')),e.params.enabledCountries=a,1===t.length?e.params.defaultCountry=t[0]:!e.params.location||-1===a.indexOf(e.params.location.country)||e.params.location.auto&&'manual'!==e.params.location.source?e.params.defaultCountry=e.params.country||e.wtbConf.geoCountry:e.params.defaultCountry=e.params.location.country,e.params.location&&e.params.location.country!==e.params.defaultCountry&&(e.params.location=null),-1===a.indexOf(e.params.defaultCountry)&&(e.params.allowOos&OOS_INIT_LVL)!==OOS_INIT_LVL)throw e.params.geoloc&&console.warn(`Default country ${e.params.defaultCountry} is out of scope. Ignored geoloc may have prevented that.\n${JSON.stringify(e.params.geoloc)}`),new Error(`Country '${e.params.defaultCountry}' out of scope`)}function setEans(e){if(e.eans=castToArray(e.eans),Array.isArray(e.eans)){e.eans=sanitizeEans(e.eans,isGTIN(e.idType)),isValidEanList(e.eans);const t={};e.enabledCountries.forEach((function(n){t[n]=e.eans})),e.eans=t}else if('object'==typeof e.eans){const t=Object.keys(e.eans);t.forEach((function(t){if(-1===e.enabledCountries.indexOf(t))return void delete e.eans[t];let n=sanitizeEans(castToArray(e.eans[t]),isGTIN(e.idType));isValidEanList(n),e.eans[t]=n}));const n=e.enabledCountries.filter((function(e){return-1===t.indexOf(e)}));n.length>0&&console.error('Some countries have no EAN/range defined: '+n.join(', '))}}function sanitizeEans(e,t){const n=e.map((e=>e.toString().replace(/\s+/g,''))).filter((e=>!!e));return t?n.map(padEan):n}function castToArray(e){return'string'==typeof e?e.split(','):'number'==typeof e?[e.toString()]:e}function isValidEanList(e){if(!e)return!1;const t=e.every(((e,t,n)=>!!e&&(24!==e.length||1===n.length)));return t||console.error('Invalid IDs/range.\nRanges must be 24 chars long and cannot be joined with other range or IDs.\nValues: '+e.join(', ')),t}function hasValidEan(e,t){if(!e)return!1;const n=e.some(isGTIN(t)?(e,t,n)=>e.length>=EAN_MIN_LENGTH&&e.length<=EAN_MAX_LENGTH||24===e.length&&1===n.length:e=>!!e);return n||console.error(`Invalid IDs/range. GTINS must be ${EAN_MIN_LENGTH} to ${EAN_MAX_LENGTH} chars long.\nRanges must be 24 chars long and cannot be joined with other range or IDs.\nValues: `+e.join(', ')),n}function isValidDefaultId(e,t){const n=isGTIN(t)?e.length>=EAN_MIN_LENGTH&&e.length<=EAN_MAX_LENGTH:!!e;return n||console.error(`Invalid default id '${e}'. Ids must be defined and EANs must be ${EAN_MIN_LENGTH} to ${EAN_MAX_LENGTH} chars long.`),n}function isGTIN(e){return'gtin'===e}function getEansfromButtons(e,t){if(t&&0!==t.length){const e=t.filter((e=>e.hasAttribute('data-mm-main-id')||e.hasAttribute('data-main-ean')));e.length&&(t=e)}else(t=document.querySelectorAll(appendSelector(e.btnSelector,'[data-main-ean]','[data-mm-main-id]'))).length||(t=document.querySelectorAll(e.btnSelector));const n={};for(let a=0;a<t.length;a++){const o=getDataAttributes(t[a],e.enabledCountries,e).eans;o&&Object.keys(o).forEach((function(e){const t=o[e];n[e]=n[e]||[],t.forEach((function(t){-1===n[e].indexOf(t)&&n[e].push(t)}))}))}const a=Object.keys(n);return a.forEach((function(e){isValidEanList(n[e])})),a.length>0?n:null}function setDefaultEan(e){if('number'==typeof e.defaultEan&&(e.defaultEan=e.defaultEan.toString()),'string'==typeof e.defaultEan){const t=e.defaultEan.replace(/[^\d]/g,'');e.defaultEan=isGTIN(e.idType)?padEan(t):t,isValidDefaultId(e.defaultEan,e.idType);let n={};e.enabledCountries.forEach((function(t){n[t]=e.defaultEan})),e.defaultEan=n}else if('object'==typeof e.defaultEan&&null!=e.defaultEan){Object.keys(e.defaultEan).forEach((function(t){if(-1!==e.enabledCountries.indexOf(t)){if(e.defaultEan[t]){const n=e.defaultEan[t].replace(/[^\d]/g,'');e.defaultEan[t]=isGTIN(e.idType)?padEan(n):n,isValidDefaultId(e.defaultEan[t],e.idType)}}else delete e.defaultEan[t]}))}}function toggleCloak(){let e=document.getElementById('swn-modal-overlay');e||(e=document.createElement('div'),e.id='swn-modal-overlay',document.body.appendChild(e)),e.classList.toggle('swn-cloak')}function toggleFullScreen(e,t){let n=e.ifr.classList.contains('swn-fullscreen');(!t.data.set&&!t.data.clear||t.data.set&&!n||t.data.clear&&n)&&(e.ifr.classList.toggle('swn-fullscreen'),n=!n,n?document.documentElement.classList.add(`swn-noscroll-${e.id}`):t.data.hideHostScroll||document.documentElement.classList.remove(`swn-noscroll-${e.id}`),e.params.containerId&&toggleStaticAncestors(e.ifr,e.id)),sendMessage(e,{action:'awe:toggleFullScreen',_mid:t.data._mid})}function toggleStaticAncestors(e,t){let n=e.parentElement;do{n.classList.toggle(`swn-force-static-${t}`),n=n.parentElement}while(n&&'BODY'!==n.tagName)}Object.defineProperty(aweLoader,'isReady',{get:function(){return _isReady}}),detectClicktag(),window.addEventListener('message',receiveMessage,!1),window.swnInitAwe=aweLoader.init=function(e,t=!1){performance.mark('swn-loader-init-start'),location.search.indexOf('dumpconf')>-1&&console.debug(JSON.stringify(e,null,2)),Array.isArray(e)||(e=[e]),t||!e.length||e[0].media||(e=activateMultiInstances(e)),pageId=pageId||e[0].pageId||uuid();const n=!(!e.length||!e[0].dntDefault);dnt=!(!e.length||!e[0].dnt),dnt&&(_dntQueue=_dntQueue||[]);for(let t=0;t<e.length;t++){let a={id:e[t].iid||uuid().replace(/-/g,''),code:e[t].code,ifr:null,wtbConf:null,params:e[t],opener:null,ifrLoaded:!1,paramsSet:!1,ajaxCheckItv:null,messageQueue:[],isOpen:!1,openDelayTimeout:null,observer:null,btnIndex:0,btnTracking:{boundIdx:null,scopes:null,timeoutId:null,observer:void 0},availChecks:{runningReqs:null,promises:null},hasCtnrUpdates:!1,trackingCallback:null};a.params.withSafeFrame=withSafeFrame,a.params.dntDefault=n,a.params.dnt=dnt,instances.push(a),'studio'===a.params.renderContext&&(a._refParams=clone(e[t]));try{if(!e[t].wtbid)throw new Error('Missing wtbid');a.ifr=createIframe(a),createContainer(a),getConf(a),injectDefaultDynamicStyle(a.id)}catch(e){console.error(e.message),track('error',{msg:e.message},!0)}}injectDefaultStyle()},window.swnOpenAwe=aweLoader.open=function(e,t,n){const a=findInstance(e);if(!a)throw new Error('No widget found for id '+e);let o;'object'==typeof t&&null!=t?(o=!!t.auto,t.enabledCountries=a.params.enabledCountries,t.eans&&setEans(t),setDefaultEan(t),delete t.enabledCountries):(o=!!t,t={}),a.openDelayTimeout&&(clearTimeout(a.openDelayTimeout),a.openDelayTimeout=null),showWidget(a,o,n,t)},aweLoader.isOpen=function(e){const t=findInstance(e);return!!t&&t.isOpen},aweLoader.sendMessage=sendMessage,aweLoader.getProductAvailability=function(e,t,n){'function'==typeof t&&(n=t,t=null);const a=findInstance(t);if(!a)throw new Error(`No widget found for '${t}'`);const o=getPersistedLocation();_checkAvailability(e,a.params.wtbid,a.params.defaultCountry,o,null,(function(e,t){const a=!!t&&t.available;1===n.length?n(a):n(e,a)}))},aweLoader.close=function(e){const t=findInstance(e);if(!t)throw new Error('Cannot find instance to close');closeWidget(t),sendMessage(t,{action:'awe:tracking',params:{event:'close'}})},window.swnUnloadAll=aweLoader.unloadAll=function(){for(;instances.length>0;){let e=instances.pop();e.observer&&(e.observer.disconnect(),delete e.observer),e.availChecks.runningReqs&&(e.availChecks.runningReqs.forEach((function(e){e.abort()})),e.availChecks.runningReqs.clear(),delete e.availChecks.runningReqs),e.availChecks.promises&&(e.availChecks.promises=null),e.ifr.parentElement.removeChild(e.ifr);let t=document.getElementById('swn-awe-popin-ctnr');t&&t.parentElement.removeChild(t);let n=document.getElementById('host-style-'+e.id);n&&n.parentElement.removeChild(n);let a=document.getElementById('swn-style-'+e.id);a&&a.parentElement.removeChild(a);let o=document.getElementById('swn-lp-embedded-button-style-'+e.id);o&&o.parentElement.removeChild(o),null!=e.ajaxCheckItv&&clearInterval(e.ajaxCheckItv);let s=document.querySelectorAll(`[data-swn-instance="${e.id}"]`);for(let e=0;e<s.length;e++)s[e].removeEventListener('click',clickHandler),s[e].removeAttribute('data-swn-instance');document.documentElement.classList.remove(`swn-noscroll-${e.id}`),document.documentElement.classList.remove(`swn-open-${e.id}`);const i=document.getElementsByClassName(`swn-force-static-${e.id}`);for(;i.length>0;)i[0].classList.remove(`swn-force-static-${e.id}`)}const e=document.getElementById('swn-default-style');e&&e.parentElement.removeChild(e);for(var t=document.getElementsByClassName('swn-awe-btn');t.length>0;)t[0].parentElement.removeChild(t[0]);ctnrObserver&&(ctnrObserver.disconnect(),ctnrObserver=null),availCheckResults&&availCheckResults.clear(),availCheckCallbacks&&availCheckCallbacks.clear(),removeClass('swn-bound'),removeClass('swn-awe-btn-enabled'),removeClass('swn-awe-btn-disabled');const n=document.getElementsByClassName('swn-default-dynamic-style');for(;n.length>0;)n[0].parentElement.removeChild(n[0])},aweLoader.setDNT=function(e,t){if(dnt!==!!e){if(dnt=!!e,dnt)_dntQueue=_dntQueue||[];else if(null!=_dntQueue){for(let e=0;e<_dntQueue.length;e++)dropPixel(_dntQueue[e]+'&flush=1');_dntQueue=null}instances.forEach((function(e){sendMessage(e,{action:'awe:dnt',params:{enabled:dnt,session:t}})}))}};const L20nKeys={ar:{OPEN:'يشترى',OPEN_LBL:'افتح القطعة'},bg:{OPEN:'Купува',OPEN_LBL:'Отворете приспособлението'},cs:{OPEN:'Koupit',OPEN_LBL:'Otevřete widget'},da:{OPEN:'Køb',OPEN_LBL:'Åbn widgeten'},de:{OPEN:'Kaufen',OPEN_LBL:'Öffnen Sie das Widget'},el:{OPEN:'Αγορά',OPEN_LBL:'Ανοίξτε το widget'},en:{OPEN:'Buy',OPEN_LBL:'Open the widget'},es:{OPEN:'Comprar',OPEN_LBL:'Abre el widget'},fi:{OPEN:'Osta',OPEN_LBL:'Avaa widget'},fr:{OPEN:'Acheter',OPEN_LBL:'Ouvrir le widget'},hr:{OPEN:'Kupiti',OPEN_LBL:'Otvorite widget'},hu:{OPEN:'megvesz',OPEN_LBL:'Nyissa meg a modult'},id:{OPEN:'Membeli',OPEN_LBL:'Buka widget'},it:{OPEN:'Acquistare',OPEN_LBL:'Apri il widget'},ja:{OPEN:'購入する',OPEN_LBL:'ウィジェットを開く'},kk:{OPEN:'Сатып алу',OPEN_LBL:'Виджетті ашыңыз'},ko:{OPEN:'구입',OPEN_LBL:'위젯 열기'},nl:{OPEN:'Kopen',OPEN_LBL:'Open de widget'},no:{OPEN:'Kjøpe',OPEN_LBL:'Åpne modulen'},pl:{OPEN:'Kup',OPEN_LBL:'Otwórz widżet'},pt:{OPEN:'Comprar',OPEN_LBL:'Abra o widget'},ro:{OPEN:'A cumpara',OPEN_LBL:'Deschideți widgetul'},ru:{OPEN:'Купить',OPEN_LBL:'Откройте виджет'},sk:{OPEN:'Kúpiť',OPEN_LBL:'Otvorte miniaplikáciu'},sr:{OPEN:'Купи',OPEN_LBL:'Отворите виџет'},sv:{OPEN:'Köpa',OPEN_LBL:'Öppna widgeten'},th:{OPEN:'ซื้อ',OPEN_LBL:'เปิดวิดเจ็ต'},tr:{OPEN:'Satın Al',OPEN_LBL:'Widget\'ı açın'},uk:{OPEN:'Купуйте',OPEN_LBL:'Відкрийте віджет'},vi:{OPEN:'Купуйте',OPEN_LBL:'Mở tiện ích con'},zh:{OPEN:'购买',OPEN_LBL:'打开小部件'},'zh-tw':{OPEN:'買',OPEN_LBL:'打開小部件'}};function findInstance(e){if(0===instances.length)return null;if(!e)return instances[0];let t=null,n=0;for(;!t&&n<instances.length;)n!=e&&instances[n].id!==e&&instances[n].code!==e||(t=instances[n]),n++;return t}function dropClicktag(e,t,n,a){const o=/^clicktag$/i,s=Object.keys(window).find((e=>o.test(e)));s&&dropPixel(window[s]),track('clicktag',{url:window[s],swavenDomain:/\/\/[^\/]+?\bswaven\b/i.test(window[s]),wtbid:e,safeframe:withSafeFrame,module:mapModule(t).toLowerCase(),iid:n,trigger:a},!0)}function updateLocale(e,t,n){const a=document.querySelectorAll(`.swn-awe-btn.swn-${n.id}`),o=Object.keys(n.params.localesConf);let s,i=0;for(;!s&&i<e.length;){const t=o.indexOf(e[i++]);-1!==t&&(s=n.params.localesConf[o[t]])}for(let n=0;n<a.length;n++){const o=a[n];for(let t=0;t<e.length;t++)o.classList.add(e[t]);for(let e=0;e<t.length;e++)o.classList.remove(t[e]);if(s)if(s.buttonImgUrl){const e=o.getElementsByClassName('swn-lp-embedded-button-img-desktop')[0],t=o.getElementsByClassName('swn-lp-embedded-button-img-mobile')[0];e&&(e.src=s.buttonImgUrl),t&&(t.src=s.buttonImgUrlMobile||s.buttonImgUrl)}else if(s.buttonText){const e=o.getElementsByTagName('span')[0];e&&(e.textContent=s.buttonText)}if(o.classList.contains('swn-awe-btn')){const t=e.find((e=>L20nKeys[e]&&!!L20nKeys[e].OPEN_LBL))||'en';o.setAttribute('aria-label',L20nKeys[t].OPEN_LBL)}}}function detectClicktag(){const e=/^clicktag$/i,t=setInterval((function(){if(instances.length>0&&instances.every((function(e){return!e.params.media})))return void clearInterval(t);const n=Object.keys(window).find((t=>e.test(t))),a=window[n];if(a&&a!==clicktag){let e=!1;null!=clicktag&&(clearInterval(t),e=!0),instances.forEach((function(t){t.params.media&&sendMessage(t,{action:'awe:clicktag',clicktag:a,stop:e})})),clicktag=a}}),1e3)}function getQuerystringParam(e){const t=window.location.search.substring(1).split('&').find((t=>t.startsWith(e+'=')));return t?decodeURIComponent(t.split('=')[1]):null}function dropPixel(e){const t=document.createElement('img');t.setAttribute('style','display:none !important;'),t.src=e,t.setAttribute('role','none'),t.setAttribute('alt','event-data'),t.setAttribute('title','event-data'),document.body.appendChild(t)}function getIframeUrl(e){return HOST+'/awe/'+WIDGET_ENGINE_VERSION+'/'+BUILD_NUMBER+(useTranspiled?'/transpiled':'/std')+(e.params.media?'_bundle':'')+'/index.html'+(e.params.media?'?media=1':'')}function loadGTM(e){if(!e||null!=window.ga)return;const t=`\n      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n      })(window,document,'script','dataLayer','${e}');`,n=document.createElement('script');n.innerText=t,document.head.appendChild(n)}function activateMultiInstances(e){const t=[];return e.forEach((function(e){const n=document.querySelectorAll(e.btnSelector||DEFAULT_BTN_SELECTOR);if(0===n.length)return;const a={config:e,instances:[]};for(let t=0;t<n.length;t++){const o=n[t].dataset.mmContainer||n[t].dataset.container||e.containerId,s=a.instances.find((e=>e.ctnrId===o));s?s.btns.push(n[t]):a.instances.push({ctnrId:o,btns:[n[t]]})}t.push(a)})),t.forEach((function(t){const n=e.findIndex((e=>e===t.config));if(-1===n)return;const a=[];t.instances.forEach((function(e){const n=clone(t.config);if(n.containerId=e.ctnrId,t.instances.length>1){n.ajaxButton&&console.warn('Multi-instance: ajax buttons will not open the widget.');const t='_'+Math.random().toString(36).substring(2);n.btnSelector='.'+t,e.btns.forEach((function(e){e.classList.add(t)}))}a.push(n)}));const o=[n,1].concat(a);Array.prototype.splice.apply(e,o)})),e}function clone(e){if(!e)return e;let t=e instanceof Array?[]:{};for(let n in e)e[n]&&Array.isArray(e[n])?t[n]=e[n].map((function(e){return e})):e[n]&&'object'==typeof e[n]?t[n]=clone(e[n]):t[n]=e[n];return t}function setTrackingHosts(e){if(!_logHost||!_trkHost){const t={BT:'https://trk2-bt.swaven.com',VT:'https://trk2-vt.swaven.com',WTB:'https://trk2-wtb.swaven.com'},n=e&&mapModule(e.module)||'WTB',a=e&&e.region?e.region+'-':'';_trkHost=t[n].replace('{{region}}-',a),_logHost='https://trace.swaven.com/log'.replace('{{region}}-',a)}}function mapModule(e){return[null,'WTB',null,'BT','VT'][e]||'WTB'}function track(e,t,n){t.v=t.v||Date.now(),t.trkOrigin='loader',t.build=BUILD_NUMBER,t.type='awe',t.ts=performance.now(),t.tzOffset=(new Date).getTimezoneOffset();let a=Object.keys(t).map((function(e){return`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`})).join('&');a+=`&rfr2=${encodeURIComponent(location.href.substring(0,2048))}`,document.referrer&&(a+=`&rfr=${encodeURIComponent(document.referrer.substring(0,512))}`),!_logHost&&_trkHost||setTrackingHosts();const o=`${_logHost}/${e}?${a}`,s=`${_trkHost}/px.png?action=${e}&${a}`;dnt?(_dntQueue.push(o),n||_dntQueue.push(s)):(dropPixel(o),n||dropPixel(s))}function isValueDefined(e){return e&&'null'!==e&&'undefined'!==e}function padEan(e){if(e.length>=EAN_PAD_LENGTH||e.length<EAN_MIN_LENGTH)return e;if('function'==typeof String.prototype.padStart)return e.padStart(EAN_PAD_LENGTH,'0');for(;e.length<EAN_PAD_LENGTH;)e='0'+e;return e}function anyPromise(e){let t=0;return e?0===e.length?Promise.resolve():new Promise((function(n,a){e.forEach((function(o){o.then(n).catch((function(){})),o.catch((function(){++t>=e.length&&a()}))}))})):Promise.reject()}function appendSelector(e,...t){const n=e.split(',').map((e=>e.trim())).filter((e=>!!e));let a=[];for(let e of t)a=a.concat(n.map((t=>t+e)));return a.join(', ')}function appendEans(e,t){return e?t?e+','+t:e:t}function _buildGlassboxPayload(){return window._detector?{sessionId:_detector.sessionId,reportURI:_detector.config.reportURI,enabled:_detector.isRecording()}:{sessionId:'',reportURI:'',enabled:!1}}function getGlassboxInfo(){return new Promise((e=>{if(window._detector&&window._detector.sessionId&&window._detector.isRecording())return e(_buildGlassboxPayload());const t=Date.now(),n=setInterval((function(){(window._detector&&window._detector.sessionId&&window._detector.isRecording()||Date.now()-t>12e4)&&(clearInterval(n),e(_buildGlassboxPayload()))}),1e3)}))}function startHostMonitor(e){return setInterval((()=>{const t=loadFromHostContext(e);t.length>0&&aweLoader.init(t,!0)}),300)}function stopHostMonitor(){clearInterval(contextCheckItv),contextCheckItv=0;const e=document.getElementsByClassName('mm-cre');for(;e.length;)e[0].classList.remove('mm-cre')}function getGlobals(){const e=document.getElementById('mm-awe-globals');if(!e)return null;try{return JSON.parse(e.textContent)}catch(e){return console.warn('[mmk]Invalid global parameters:',e),null}}function loadFromHostContext(e){const t=[],n=/^\s*$/,a=document.querySelectorAll('[data-mm-wtbid]:not(.mm-cre)');for(const o of a){const a=o.dataset.mmWtbid,s=o.dataset.mmIds,i=o.dataset.mmIdType,r=''===o.dataset.mmSticky||'true'===o.dataset.mmSticky,l={wtbid:a,eans:'',embeddedBtn:r,containerId:'',btns:[],idType:'',...e};if('TEMPLATE'===o.tagName)l.eans=appendEans(l.eans,s),l.idType=i,l.embeddedBtn=!0,t.push(l);else if('DIV'===o.tagName&&n.test(o.textContent)){o.id||(o.id='mm_'+Math.random().toString(36).substring(2));const e=t.find((e=>e.wtbid===a&&e.containerId===o.id));e?(e.eans=appendEans(e.eans,s),e.idType=i):(l.containerId=o.id,l.eans=appendEans(l.eans,s),l.idType=i,t.push(l))}else{let e=o.dataset.mmContainer;e&&e.startsWith('#')&&(e=e.substring(1));const n=instances.find((t=>t.params.wtbid===a&&(!e||t.params.containerId===e)));if(n)o.dataset.swnIdx=++n.btnIndex,checkAvailOrBindButtons([o],n,!0);else{let n=t.find((t=>t.wtbid===a&&(!e||t.containerId===e)));n?n.btns.push(o):(l.btns.push(o),l.containerId=e,t.push(l))}}o.classList.add('mm-cre')}return t}aweLoader.updateStyle=function(e,t){'object'==typeof e&&(t=e,e=0);const n=findInstance(e);n&&(n.params.template&&n.params.template!==t.template?(console.debug('%s vs %s, reload',n.params.template,t.template),this.unloadAll(),this.init(Object.assign({},n._refParams,{remoteConf:t}))):sendMessage(n,{action:'awe:style-update',params:t}))},aweLoader.startPageChange=function(){stopHostMonitor(),aweLoader.unloadAll()},aweLoader.endPageChange=function(){if(0!==contextCheckItv)return;const e=getGlobals();contextCheckItv=startHostMonitor(e)};try{aweParams&&aweLoader.init(aweParams)}catch(e){}try{const e=getGlobals(),t=loadFromHostContext(e);t.length>0&&aweLoader.init(t,!0),contextCheckItv=startHostMonitor(e)}catch(e){console.error(e)}aweLoader.version={core:BUILD_NUMBER}}(window.aweLoader||{});
//# sourceMappingURL=loader.js.map
